if (item.dependencies && Array.isArray(item.dependencies)) {
    item.dependencies = item.dependencies.map(cleanupDependencyFields);
    item.dependencies.sort((a, b) => {
        const keyA = (a.dependencyType || '') + '!@#$' + (a.name || '');
        const keyB = (b.dependencyType || '') + '!@#$' + (b.name || '');
        return keyA.localeCompare(keyB);
    });
}
