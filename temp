function sortJson(jsonData) {
    if (!Array.isArray(jsonData)) return jsonData;

    // Przetwarzamy każdą grupę, najpierw czyścimy niepotrzebne pola
    jsonData = jsonData.map(item => cleanupGroupFields(item));

    jsonData.forEach(item => {
        // Sortowanie tablicy items
        if (item.items && Array.isArray(item.items)) {
            item.items = item.items.map(cleanupItemFields);
            item.items.sort((a, b) => a.name.localeCompare(b.name));
        }
        // Sortowanie tablicy dependencies
        if (item.dependencies && Array.isArray(item.dependencies)) {
            item.dependencies = item.dependencies.map(cleanupDependencyFields);
            item.dependencies.sort((a, b) => {
                let cmp = a.dependencyType.localeCompare(b.dependencyType);
                if (cmp === 0) {
                    cmp = a.name.localeCompare(b.name);
                }
                return cmp;
            });
        }
        // Sortowanie tablicy tags
        if (item.tags && Array.isArray(item.tags)) {
            item.tags.sort();
        }
    });

    // Sortowanie głównej tablicy wg domainClass i id
    jsonData.sort((a, b) => {
        let cmp = a.domainClass.localeCompare(b.domainClass);
        if (cmp === 0) {
            cmp = a.id.localeCompare(b.id);
        }
        return cmp;
    });

    return jsonData;
}
